{% extends 'base.html.twig' %}

{% block title %}Mon panier - ProductAMP{% endblock %}

{% block content %}
<br/>
<h1>Mon panier</h1>
<br/>
Voici l'ensemble des articles ajoutés au panier !
<hr/>
Mon Panier
{% if cart|length > 0 %}
<table class="table">
  <thead>
    <tr>
      <th scope="col">Produits</th>
      <th scope="col">Quantite</th>
      <th scope="col">Prix</th>
      <th scope="col">Total</th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    {% set total = null %}
      {% for product in cart %}
      
    <tr>
      <th scope="row">{{product.product.name}}</th>
      <td>{{product.quantity}}</td>
      <td>{{(product.product.price / 100)|number_format(2,',','.')}}€</td>
      <td>{{(product.product.price * product.quantity / 100)|number_format(2,',','.')}}€</td>
      <td>
        <a href="{{path('delete_to_cart',{'id' : product.product.id})}}">
          <img src="{{asset('assets/img/trash.png')}}" style="width:20%" alt="supprimer mon produit"</td>
        </a>
    </tr>
  {% set total = total + (product.product.price * product.quantity) %}
    {% endfor %}
   </tbody> 
</table>
<div class="text-right mb*5">
  
 <b>Total de Mon Panier : {{(total / 100)|number_format(2,',','.')}}€</b> <br/>
  <a href="" class="btn mt*3">Valider la commande</a>
</div>
{% else %}
<hr>
  <p><b>Votre panier est vide</b></p>
{% endif %}
{% endblock %}
